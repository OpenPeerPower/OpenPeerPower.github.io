I"Ä
<p>Geolocation aware entities are typically related to events in the real world in the vicinity of Open Peer Powerâ€™s location, like for example weather events, bush fires or earthquakes.</p>
<p>Entities can have associated geolocation coordinates (latitude and longitude) so that they are displayed on the map. The distance from the entityâ€™s coordinates to Open Peer Powerâ€™s location can be used for filtering.</p>
<h2>Geolocation trigger</h2>
<p>The <a href="/docs/automation/trigger/#geolocation-trigger">Geolocation trigger</a> can be used in automations triggered by Geolocation entities appearing in or disappearing from zones. The following value must be used as <code>source</code> of the trigger depending on which platform is managing the entities:</p>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr>
<td>GeoJSON Events</td>
<td><code>geo_json_events</code></td>
</tr>
<tr>
<td>GeoNet New Zealand Quakes</td>
<td><code>geonetnz_quakes</code></td>
</tr>
<tr>
<td>Global Disaster Alert and Coordination System (GDACS)</td>
<td><code>gdacs</code></td>
</tr>
<tr>
<td>IGN SismologÃ­a</td>
<td><code>ign_sismologia</code></td>
</tr>
<tr>
<td>NSW Rural Fire Service Incidents</td>
<td><code>nsw_rural_fire_service_feed</code></td>
</tr>
<tr>
<td>Queensland Bushfire Alert</td>
<td><code>qld_bushfire</code></td>
</tr>
<tr>
<td>U.S. Geological Survey Earthquake Hazards Program</td>
<td><code>usgs_earthquakes_feed</code></td>
</tr>
<tr>
<td>The World Wide Lightning Location Network</td>
<td><code>wwlln</code></td>
</tr>
</tbody>
</table>
<p>Conditions can be used to further filter entities, for example by inspecting their state attributes.</p>
<h2>Geolocation notification example</h2>
<p>The following example automation creates a notification on the screen when a fire classified as â€˜Bush Fireâ€™ is reported within a predefined bush fire alert zone:</p>
<p>{% highlight yaml %}
geo_location:</p>
<ul>
<li>platform: nsw_rural_fire_service_feed
categories:
<ul>
<li>â€˜Emergency Warningâ€™</li>
<li>â€˜Watch and Actâ€™</li>
<li>â€˜Adviceâ€™</li>
</ul>
</li>
</ul>
<p>zone:</p>
<ul>
<li>name: Bush Fire Alert Zone
latitude: -36.666667
longitude: 149.833333
radius: 15000
passive: true</li>
</ul>
<p>automation:</p>
<ul>
<li>alias: â€˜Bush Fire Alertâ€™
trigger:
platform: geo_location
source: nsw_rural_fire_service_feed
zone: zone.bush_fire_alert_zone
event: enter
condition:
condition: template
value_template: â€œ{{ trigger.to_state.attributes.type == â€˜Bush Fireâ€™ }}â€
action:
<ul>
<li>service: persistent_notification.create
data_template:
message: â€œ{{ trigger.to_state.name }} - {{ trigger.to_state.attributes.status }}â€
title: â€œBush Fire Alertâ€
{% endhighlight %}</li>
</ul>
</li>
</ul>
:ET