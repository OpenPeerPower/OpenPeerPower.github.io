I"d<p>The person integration allows connecting <a href="/integrations/device_tracker/">device tracker</a> entities to one or more person entities. The state updates of a connected device tracker will set the state of the person. When multiple device trackers are used, the state of person will be determined in this order:</p>
<ol>
<li>If there are stationary trackers (non-GPS trackers, i.e., a router or Bluetooth ‘device_trackers’) presenting the status ‘home’, the tracker most recently updated will be used.</li>
<li>If there are trackers of type ‘gps’, then the most recently updated tracker will be used.</li>
<li>Otherwise, the latest tracker with status ‘not_home’ will be used.</li>
</ol>
<p>Let’s say, for example, that you have 3 trackers: ‘tracker_gps’, ‘tracker_router’ and ‘tracker_ble’.</p>
<ol>
<li>You’re at home, all 3 devices show status ‘home’ - status of your Person entity will be ‘home’ with source ‘tracker_router’ or ‘tracker_ble’, whichever was most recently updated.</li>
<li>You just left home. ‘tracker_gps’ shows status ‘not_home’, but the other two trackers show status ‘home’ (they may not have yet updated due to their ‘consider_home’ setting see <a href="/integrations/device_tracker/#configuring-a-device_tracker-platform">device_tracker</a>). Since the stationary trackers have priority, you are considered ‘home’.</li>
<li>After some time, both stationary trackers show status ‘not_home’. Now your Person entity has status ‘not_home’ with source ‘tracker_gps’.</li>
<li>While you are away from home, your Open Peer Power is restarted. Until ‘tracker_gps’ receives an update, your status will be determined by the stationary trackers, since they will have the most recent update after a restart. Obviously, the status will be ‘not_home’.</li>
<li>Then you’re going into a zone you have defined as ‘zone1’, ‘tracker_gps’ sends an update, and now your status is ‘zone1’ with source ‘tracker_gps’.</li>
<li>You’ve returned home and your mobile device has connected to the router, but ‘tracker_gps’ hasn’t updated yet. Your status will be ‘home’ with source ‘tracker_router’.</li>
<li>After the ‘tracker_gps’ update occurs, your status will still be ‘home’ with source ‘tracker_router’ or ‘tracker_ble’, whichever has the most recent update.</li>
</ol>
<p>TL;DR: When you’re at home, your position is determined first by stationary trackers (if any) and then by GPS. When you’re outside your home, your position is determined firstly by GPS and then by stationary trackers.</p>
<p><strong>Hint</strong>: When you use multiple device trackers together, especially stationary and GPS trackers, it’s advisable to set <code>consider_home</code> for stationary trackers as low as possible see <a href="/integrations/device_tracker/#configuring-a-device_tracker-platform">device_tracker</a>).</p>
<p>You can manage persons via the UI from the person page inside the configuration panel or via <code>YAML</code> in your <code>configuration.yaml</code> file.</p>
<h2>Configuring the <code>person</code> integration via the Open Peer Power configuration panel</h2>
<p>This integration is by default enabled, unless you’ve disabled or removed the <a href="https://www.openpeerpower.io/integrations/default_config/"><code>default_config:</code></a> line from your configuration. If that is the case, the following example shows you how to enable this integration manually:</p>
<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">person:</code></pre></figure>
<h2>Configuring the <code>person</code> integration via YAML</h2>
<p>If you prefer YAML, you can also configure your persons via <code>configuration.yaml</code>:</p>
<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"># Example configuration.yaml entry
person:
  - name: Ada
    id: ada6789
    device_trackers:
      - device_tracker.ada</code></pre></figure>
<p>An extended example would look like the following sample:</p>
<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"># Example configuration.yaml entry
person:
  - name: Ada
    id: ada6789
    device_trackers:
      - device_tracker.ada
  - name: Stacey
    id: stacey12345
    user_id: 12345678912345678912345678912345
    device_trackers:
      - device_tracker.stacey
      - device_tracker.beacon</code></pre></figure>
<p>If you change the YAML, you can reload it by calling the <code>person.reload</code> service.</p>
<h3>Customizing the picture for a person</h3>
<p>By following the instructions on the <a href="/docs/configuration/customizing-devices#entity_picture">customizing entities</a> page, you can customize the picture used for a person entity in the <code>customize:</code> section of your configuration. For example:</p>
<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">customize:
  person.ada:
    entity_picture: &quot;/local/ada.jpg&quot;</code></pre></figure>
<p>See the documentation about <a href="/integrations/http/#hosting-files">hosting files</a> for more information about the <code>www</code> folder.</p>
:ET